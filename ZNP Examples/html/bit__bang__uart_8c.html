<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CC2530ZNP Examples: bit_bang_uart.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>bit_bang_uart.c File Reference</h1>
<p>bit-bang UART implementation  
<a href="#_details">More...</a></p>
<code>#include &quot;<a class="el" href="bit__bang__uart_8c.html">bit_bang_uart.h</a>&quot;</code><br/>
<code>#include &quot;msp430x24x.h&quot;</code><br/>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab3409bba9f64c9215f4c457d0f565adc"></a><!-- doxytag: member="bit_bang_uart.c::MDB" ref="ab3409bba9f64c9215f4c457d0f565adc" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>MDB</b>&nbsp;&nbsp;&nbsp;1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acc77ccd55c05e0a17eeb39b5eeba4ebd"></a><!-- doxytag: member="bit_bang_uart.c::BIT_BANG_TX_PORT" ref="acc77ccd55c05e0a17eeb39b5eeba4ebd" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>BIT_BANG_TX_PORT</b>&nbsp;&nbsp;&nbsp;P6OUT</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a395522a9590b5211561aeb18f406c752"></a><!-- doxytag: member="bit_bang_uart.c::BIT_BANG_TX_BIT" ref="a395522a9590b5211561aeb18f406c752" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>BIT_BANG_TX_BIT</b>&nbsp;&nbsp;&nbsp;BIT7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adb46ab44f3d7a597836cd66d2e793212"></a><!-- doxytag: member="bit_bang_uart.c::BIT_BANG_RX_PORT" ref="adb46ab44f3d7a597836cd66d2e793212" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>BIT_BANG_RX_PORT</b>&nbsp;&nbsp;&nbsp;P2IN</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab741b2001d210c2c5398357050986150"></a><!-- doxytag: member="bit_bang_uart.c::BIT_BANG_RX_BIT" ref="ab741b2001d210c2c5398357050986150" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>BIT_BANG_RX_BIT</b>&nbsp;&nbsp;&nbsp;BIT5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa916f83153037cbca3b7f9c02f548f3b"></a><!-- doxytag: member="bit_bang_uart.c::DISABLE_BIT_BANG_RX_INTERRUPT" ref="aa916f83153037cbca3b7f9c02f548f3b" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DISABLE_BIT_BANG_RX_INTERRUPT</b>()&nbsp;&nbsp;&nbsp;(P2IE &amp;= ~BIT5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f4dbeaa734cafb2728023ad889e2c24"></a><!-- doxytag: member="bit_bang_uart.c::ENABLE_BIT_BANG_RX_INTERRUPT" ref="a8f4dbeaa734cafb2728023ad889e2c24" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ENABLE_BIT_BANG_RX_INTERRUPT</b>()&nbsp;&nbsp;&nbsp;(P2IE |= BIT5)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acc650bab6c285bee1d27e24631f497d1"></a><!-- doxytag: member="bit_bang_uart.c::BIT_LENGTH_9600" ref="acc650bab6c285bee1d27e24631f497d1" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>BIT_LENGTH_9600</b>&nbsp;&nbsp;&nbsp;160</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55db7f9efe179a0d753d8ed83608d30a"></a><!-- doxytag: member="bit_bang_uart.c::HALF_BIT_LENGTH_9600" ref="a55db7f9efe179a0d753d8ed83608d30a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>HALF_BIT_LENGTH_9600</b>&nbsp;&nbsp;&nbsp;76</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acc9baea143a08e0e4eeec53831ae9465"></a><!-- doxytag: member="bit_bang_uart.c::BIT_LENGTH_19200" ref="acc9baea143a08e0e4eeec53831ae9465" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>BIT_LENGTH_19200</b>&nbsp;&nbsp;&nbsp;75</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="accddae891e360e783069fe920b4e2a9d"></a><!-- doxytag: member="bit_bang_uart.c::HALF_BIT_LENGTH_19200" ref="accddae891e360e783069fe920b4e2a9d" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>HALF_BIT_LENGTH_19200</b>&nbsp;&nbsp;&nbsp;27</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaebbdb2d7c8c101726f7c351874085e5"></a><!-- doxytag: member="bit_bang_uart.c::OUTPUT_1" ref="aaebbdb2d7c8c101726f7c351874085e5" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>OUTPUT_1</b>()&nbsp;&nbsp;&nbsp;(BIT_BANG_TX_PORT |= BIT_BANG_TX_BIT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a945060616551071ed506d740f1c583a9"></a><!-- doxytag: member="bit_bang_uart.c::OUTPUT_0" ref="a945060616551071ed506d740f1c583a9" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>OUTPUT_0</b>()&nbsp;&nbsp;&nbsp;(BIT_BANG_TX_PORT &amp;= ~BIT_BANG_TX_BIT)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab65ee394797feea6b8ae21528f1e26eb"></a><!-- doxytag: member="bit_bang_uart.c::NUMBER_OF_DATA_BITS" ref="ab65ee394797feea6b8ae21528f1e26eb" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>NUMBER_OF_DATA_BITS</b>&nbsp;&nbsp;&nbsp;8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5859d823bf5d0646b764dc82c75aac9e"></a><!-- doxytag: member="bit_bang_uart.c::TOGGLE_DEBUG_PIN" ref="a5859d823bf5d0646b764dc82c75aac9e" args="()" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>TOGGLE_DEBUG_PIN</b>()&nbsp;&nbsp;&nbsp;(P4OUT ^= BIT5)</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bit__bang__uart_8c.html#a814f42c66578c1adba2e27ea6b6a1477">delayFullBit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bit__bang__uart_8c.html#abd37bb395856e2e4309dcb35dca8a4a1">delayHalfBit</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bit__bang__uart_8c.html#aa5bcdc5a12581c6dce38d83a274c5870">bitBangOutput</a> (unsigned char outputByte)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="bit__bang__uart_8c.html#ada51d6c5479372a61767e2d07030ddcc">bitBangInput</a> ()</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>bit-bang UART implementation </p>
<p>This file implements a simple software defined Universal Asynchronous Receiver/Transmitter (UART). For simplicity and portability, timing is done using delay loops. Depending on hardware resources, you may want to use a timer instead.</p>
<p>Baud rate is 19200 in the format 8-N-1: 8 data bits, no parity, 1 stop bit. Line is normally high.</p>
<p>The defines will need to be modified if changing hardware implementation.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>if changing hardware implementation, first verify with an oscilloscope or similar that the timing is correct. For example, bit width in 9600 bps one bit width is 104.2uSec, at 19,200 it is 52.08uSec, and at 38,400 it is 26.041uSec. Best way to do this is output 'U' and measure the bit widths.</dd></dl>
<dl class="rcs"><dt><b>Rev</b></dt><dd>365 </dd></dl>
<dl class="rcs"><dt><b>Author</b></dt><dd>dsmith </dd></dl>
<dl class="rcs"><dt><b>Date</b></dt><dd>2010-03-24 16:57:31 -0700 (Wed, 24 Mar 2010) </dd></dl>
<dl class="rcs"><dt><b>URL</b></dt><dd><a href="http://dsmith@ns.svnrepository.com/svn/hardware/fw/ZNP%20Examples/bit_bang_uart.c">http://dsmith@ns.svnrepository.com/svn/hardware/fw/ZNP%20Examples/bit_bang_uart.c</a> </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ada51d6c5479372a61767e2d07030ddcc"></a><!-- doxytag: member="bit_bang_uart.c::bitBangInput" ref="ada51d6c5479372a61767e2d07030ddcc" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char bitBangInput </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Blocking UART receiver. Called by BIT_BANG_RX_PORT Interrupt Service Routine upon detection of start bit (high to low transition). BIT_BANG_RX_BIT should be configured as high-low edge triggered interrupt. Receives a byte and then processes it. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>BIT_BANG_RX_PORT, BIT_BANG_RX_BIT, DISABLE_BIT_BANG_RX_INTERRUPT(), and ENABLE_BIT_BANG_RX_INTERRUPT() must be defined. Modify accordingly for other hardware. </dd></dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Oscillator configured for 8MHz </dd>
<dd>
A high-to-low transition has occurred on BIT_BANG_RX_BIT </dd></dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the byte received </dd></dl>

</div>
</div>
<a class="anchor" id="aa5bcdc5a12581c6dce38d83a274c5870"></a><!-- doxytag: member="bit_bang_uart.c::bitBangOutput" ref="aa5bcdc5a12581c6dce38d83a274c5870" args="(unsigned char outputByte)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bitBangOutput </td>
          <td>(</td>
          <td class="paramtype">unsigned char&nbsp;</td>
          <td class="paramname"> <em>outputByte</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Transmits one byte out the specified pin</p>
<h2><a class="anchor" id="sending">
To Send a Byte</a></h2>
<ul>
<li>Line is nominally at '1' (high)</li>
<li>1 Start bit = '0'</li>
<li>Data, MSB first, LSB last. '1' = line high, '0' = line low</li>
<li>1 Stop bit = '1' (idle, or high) <dl class="note"><dt><b>Note:</b></dt><dd>BIT_BANG_RX_PORT, BIT_BANG_RX_BIT, DISABLE_BIT_BANG_RX_INTERRUPT(), and ENABLE_BIT_BANG_RX_INTERRUPT() must be defined. Modify accordingly for other hardware. </dd></dl>
<dl class="pre"><dt><b>Precondition:</b></dt><dd>Oscillator configured for 8MHz </dd>
<dd>
port/bit configured for logic output. </dd>
<dd>
bit is high (logic '1') </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>byte</em>&nbsp;</td><td>the byte to output </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="a814f42c66578c1adba2e27ea6b6a1477"></a><!-- doxytag: member="bit_bang_uart.c::delayFullBit" ref="a814f42c66578c1adba2e27ea6b6a1477" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delayFullBit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Simple delay for bit width. Used in transmit and receive. </p>

</div>
</div>
<a class="anchor" id="abd37bb395856e2e4309dcb35dca8a4a1"></a><!-- doxytag: member="bit_bang_uart.c::delayHalfBit" ref="abd37bb395856e2e4309dcb35dca8a4a1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void delayHalfBit </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Simple delay for 1/2 of bit width. Used in receive. </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address style="text-align: right;"><small>Generated on Fri Apr 9 17:50:11 2010 for CC2530ZNP Examples by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
